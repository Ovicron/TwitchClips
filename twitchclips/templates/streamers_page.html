{% extends 'layout.html' %}
{% block content %}
{% for user in streamers_page_list %}
<div class='bg-streamer-page text-dark rounded'>
    <h1 class='text-center p-3'>Overview For: {{ user.name }} <img src="{{ user.logo }}" width="72" class='rounded'></h1>
</div>
<hr>

<div class="row">
    <div class="col-md-8">
        <table class="table">
            <h2 class='text-center text-primary'>All Time Statistics</h2>
            <thead>
                <tr>
                    <th scope="col">Total Followers</th>
                    <th scope="col">Total Views</th>
                    <th scope="col">Hours Streamed</th>
                    <th scope="col">Peak Viewers</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1.56M</td>
                    <td>131M</td>
                    <td>5,501</td>
                    <td>239,382</td>
                </tr>

            </tbody>
        </table>
        <hr>
        <table class="table">
            <h2 class='text-center text-primary'>Monthly Statistics</h2>
            <thead>
                <tr>
                    <th scope="col">Average Viewers</th>
                    <th scope="col">Viewer Hours</th>
                    <th scope="col">Hours Streamed</th>
                    <th scope="col">Peak Viewers</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>483K</td>
                    <td>13M</td>
                    <td>844</td>
                    <td>92,384</td>
                </tr>

            </tbody>
        </table>
    </div>

    <div class="col-md-4 mt-5">
        <div class="card" style="width: 22rem;">
            <div class="card-header">
                Channel Information
            </div>
            <div class="row">
                <div class="col-6">
                    <ul class="list-group list-group-flush font-weight-bold">
                        <li class="list-group-item">Language</li>
                        <li class="list-group-item">First Seen</li>
                        <li class="list-group-item">Last Seen</li>
                        <li class="list-group-item">Followers</li>
                </div>
                <div class="col-6">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">English</li>
                        <li class="list-group-item">{{ user.first_seen.strftime('%b %d %Y') }}</li>
                        <li class="list-group-item">{{ user.last_seen.strftime('%b %d %Y') }}</li>
                        <li class="list-group-item">3,237,872</li>
                </div>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6 mt-5">
        <div class="chart d-flex justify-content center flex-column ">
            <h3 class='text-center mb-4'>Average weekly viewers</h3>

            <canvas id="viewerChart" width="600" height="400"></canvas>
        </div>
    </div>

    <div class="col-md-6 mt-5">
        <div class="chart d-flex justify-content center flex-column ">
            <h3 class='text-center mb-4'>Average weekly followers</h3>

            <canvas id="followerChart" width="600" height="400"></canvas>
        </div>
    </div>
</div>
{% endfor %}
{% endblock content %}


<!-------------------------------------------------------- SCRIPTS BELOW-------------------------------------------------------- -->
{% block scripts %}
<script>
    // Global parameters:
    // do not resize the chart canvas when its container does (keep at 600x400px)
    Chart.defaults.global.responsive = false;

    // define the chart data
    let chartData = {
        labels: [{% for day in days %}
    "{{ day }}",
        {% endfor %}],
    datasets: [{
        label: '{{ legend }}',
        fill: 0,
        lineTension: 0.3,
        backgroundColor: "rgba(75,192,192,0.4)",
        borderColor: "rgba(75,192,192,1)",
        borderCapStyle: 'butt',
        borderDash: [],
        borderDashOffset: 0.0,
        borderJoinStyle: 'miter',
        pointBorderColor: "rgba(75,192,192,1)",
        pointBackgroundColor: "#fff",
        pointBorderWidth: 1,
        pointHoverRadius: 5,
        pointHoverBackgroundColor: "rgba(75,192,192,1)",
        pointHoverBorderColor: "rgba(220,220,220,1)",
        pointHoverBorderWidth: 2,
        pointRadius: 1,
        pointHitRadius: 10,
        data: [{% for viewer in viewers %}
                {{ viewer }},
    {% endfor %}],
        spanGaps: false
  }]
}

    // get chart canvas
    let ctx = document.getElementById("viewerChart").getContext("2d");

    // create the chart using the chart canvas
    let myChart = new Chart(ctx, {
        type: 'bar',
        data: chartData,
    });
</script>

<!--  FOLLOWER SHIT -->

<script>
    var ctx1 = document.getElementById('followerChart').getContext('2d');
    var followerChart = new Chart(ctx1, {
        type: 'bar',
        data: {
            labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });
</script>
{% endblock scripts %}