{% extends 'layout.html' %}
{% block content %}

<div class="post-page-container">
    <!-- Main post content -->
    <div class="container-fluid text-center post-container">
        <h1 class='text-primary'> {{ post.title }} </h1>
        <h4>{{ post.body }}</h4>
        <p class="text-muted">Posted by <a class='text-info' href='#'>{{ post.author.username }}</a> on
            {{ post.date_posted.strftime('%m/%d/%Y - %I:%M %p') }}</p>
        <img class='img-fluid' id="user-image" src="{{  post.link }}">
    </div>
    <!-- ennd main post content -->

    <!-- Post action buttons -->
    <div class="action-btn">
        {% if current_user.is_authenticated %}
        <a href="{{ url_for('comment', post_id=post.id) }}" class="btn btn btn btn-info mr-3">Reply</a>
        {% else %}
        <a href="#" class="btn btn btn btn-info mr-3 disabled">Login to comment</a>
        {% endif %}

        {% if post.author == current_user %}
        <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn btn btn-dark mr-3">Edit</a>
        <a href="{{ url_for('delete_post', post_id=post.id) }}" class="btn btn btn btn-danger">Delete</a>
        {% endif %}
    </div>
    <!-- end post action buttons -->

    <!-- Comment section -->
    {% for comment in comments %}
    <div class="d-flex flex-row mt-5 comment-section">
        <div class="p-2"><img src="../static/images/icons/user.png" alt="user" width="40" class="rounded-circle"></div>
        <div>
            <h4 class="mt-2 text-info">{{ comment.author.username }}</h4>
            <p>{{ comment.body }}</p>
            <span class="text-muted comment-date">{{ comment.date_replied.strftime('%m/%d/%Y - %I:%M %p') }}</span>
            {% if comment.author == current_user %}
            <a href="{{ url_for('edit_comment', comment_id=comment.id) }}" class='ml-3' id="delete-comment">Edit</a>
            <a href="{{ url_for('delete_comment', comment_id=comment.id) }}" class='ml-3' id="delete-comment">Delete</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
    <!-- end Comment section -->
</div>

{% endblock content %}