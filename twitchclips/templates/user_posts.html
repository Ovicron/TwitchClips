{% extends 'layout.html' %}
{% block content %}

<div class="user-page-container">

    {% if user.username == current_user.username %}
    <h1 class="text-center display-4">Showing all submissions for: <span class='user-page-name'>{{ user.username }}
        </span></h1>
    <hr>

    {% for post in posts %}
    <!-- Main post content -->
    <div class="container-fluid text-center post-container">
        <h1 class='text-primary'> {{ post.title }} </h1>
        <h4>{{ post.body }}</h4>
        <p class="text-muted">Posted by <a class='text-info' href='#'>{{ post.author.username }}</a> on
            {{ post.date_posted.strftime('%m/%d/%Y - %I:%M %p') }}</p>
        <img class='img-fluid' id="user-image" src="{{ post.link }}">
    </div>
    <!-- End main content -->

    <!-- Post action buttons -->
    <div class="action-btn">
        <a href="{{ url_for('post_page', post_id=post.id) }}" class="btn btn-sm btn-primary mr-3">View All
            Comments</a>
        <a href="{{ url_for('comment', post_id=post.id) }}" class="btn btn-sm btn-info mr-3">Reply</a>
        <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn-sm btn-dark mr-3">Edit</a>
        <a onclick="confirm('Are you sure you want to delete this post?')" href="#"
            class="btn btn-sm btn-danger">Delete</a>
    </div>
    <hr>
    <!-- End action buttons -->

    <!-- Comment section -->
    {% for comment in comments %}
    <div class="d-flex flex-row mt-5 comment-section">
        <div class="p-2"><img src="../static/images/icons/user.png" alt="user" width="40" class="rounded-circle">
        </div>
        <div>
            <h4 class="mt-2">{{ comment.author.username }}</h4>
            <p>{{ comment.body }}</p>
            <span class="text-muted comment-date">{{ comment.date_replied.strftime('%m/%d/%Y - %I:%M %p') }}</span>
        </div>
    </div>
    {% endfor %}
    <!-- End comments -->
    {% endfor %}

    {% else %}
    <div>
        <h1 class="display-4 text-center mt-5"> You do not have access to this view page </h1>
    </div>
    {% endif %}

</div>

{% endblock content %}